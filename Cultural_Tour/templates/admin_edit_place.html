{% extends "base.html" %}
{% block title %}Edit Place{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>Edit Place</h3>
        <a href="{{ url_for('admin_places') }}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left"></i> Back to Places
        </a>
      </div>

      <form method="POST">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="name" class="form-label">Place Name *</label>
            <input type="text" class="form-control" id="name" name="name" value="{{ place.name }}" required>
          </div>
          <div class="col-md-6 mb-3">
            <label for="state" class="form-label">State *</label>
            <select class="form-select" id="state" name="state" required>
              <option value="">Select State</option>
              {% for state in states %}
                <option value="{{ state }}" {% if place.state == state %}selected{% endif %}>{{ state }}</option>
              {% endfor %}
            </select>
          </div>
        </div>

        <div class="mb-3">
          <label for="city" class="form-label">City</label>
          <input type="text" class="form-control" id="city" name="city" value="{{ place.city or '' }}">
        </div>

        <div class="mb-3">
          <label for="short_intro" class="form-label">Short Introduction *</label>
          <input type="text" class="form-control" id="short_intro" name="short_intro" value="{{ place.short_intro }}" required>
          <div class="form-text">A brief introduction (max 200 characters)</div>
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description *</label>
          <textarea class="form-control" id="description" name="description" rows="4" required>{{ place.description }}</textarea>
        </div>

        <div class="mb-3">
          <label for="culture_description" class="form-label">Culture Description *</label>
          <textarea class="form-control" id="culture_description" name="culture_description" rows="4" required>{{ place.culture_description }}</textarea>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="image_url" class="form-label">Image URL</label>
            <input type="url" class="form-control" id="image_url" name="image_url" value="{{ place.image_url or '' }}">
            {% if place.image_url %}
              <div class="mt-2">
                <img src="{{ place.image_url }}" alt="{{ place.name }}" class="img-thumbnail" style="max-height: 100px;">
              </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="video_url" class="form-label">Video URL</label>
            <input type="url" class="form-control" id="video_url" name="video_url" value="{{ place.video_url or '' }}">
            <div class="form-text">YouTube watch or embed URL</div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="price_per_person" class="form-label">Price per Person (â‚¹) *</label>
            <input type="number" class="form-control" id="price_per_person" name="price_per_person" 
                   value="{{ '%.0f'|format(place.price_per_person) }}" min="0" step="100" required>
          </div>
          <div class="col-md-6 mb-3">
            <label for="duration_days" class="form-label">Duration (days) *</label>
            <input type="number" class="form-control" id="duration_days" name="duration_days" 
                   value="{{ place.duration_days }}" min="1" max="30" required>
          </div>
        </div>

        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <a href="{{ url_for('admin_places') }}" class="btn btn-secondary me-md-2">Cancel</a>
          <button type="submit" class="btn btn-primary">Update Place</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}